
<div class="container" style="margin-top: 2em">

  <div class="row">
    <div class="jumbotron" style="width:50%">
      <div style="height: 300px;">
        <%= image_tag(@movie.optimized_image(@movie.banner, 400, 200)) %>
      </div>
      <h1 class="display-4">
        <%= link_to @movie.title, root_path %>
      </h1>
      <p class="lead">
        <%= @movie.updated_at.strftime("%A, %B %e, %Y") %> | <%= pluralize(@movie.views, "View") %> |
        <%= pluralize(@num_reviews, "Reviews") %> |
        <% if current_user&.admin%>
          <%= link_to "Delete", @movie, method: :delete %>
        <% end %>
      </p>
      <hr class="my-4" />
      <div class="movie_body">
        <%= @movie.description %>
      </div>
      <div>

        <% if @movie.director %>
          <label>Director</label>
          <%= link_to (@movie.directed_by.firstname + " " + @movie.directed_by.lastname) , actor_path(@movie.directed_by), method: :get %>
        <% end %>
        <br>
        <%= link_to 'Cast', actors_path(movie: @movie, list: true, role: false), method: :get %>
      </div>
      <% if is_admin! %>
        <%= link_to "Add Actor", actors_path(movie: @movie, list:false, role: true), method: :get %>
        <% if @movie.director %>
        <% else %>
          <%= link_to "Add Director", actors_path(movie: @movie, list:false, role: false), method: :get %>
        <% end %>
      <% end %>
    </div>
  </div>

  <% if @reviews.blank? %>
    <h3>No reviews just yet, would you like to add the first!</h3>
    <%= link_to "Write Review", new_movie_review_path(@movie), method: :get, class: "btn btn-danger" %>
  <% else %>
    <%= link_to "Write Review", new_movie_review_path(@movie), method: :get, class: "btn btn-danger" %>
    <% @reviews.each_slice(4) do |reviews| %>
      <div class="row">
        <% reviews.each do |review|%>
          <%= render 'reviews/show', review: review, details: false%>
        <% end %>
      </div>
    <% end %>
  <% end %>
</div>